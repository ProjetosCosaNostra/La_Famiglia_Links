# üß† Base oficial do PyTorch (CPU-only)
FROM python:3.10-slim

WORKDIR /app

# Instala depend√™ncias b√°sicas
RUN apt-get update && apt-get install -y \
    git ffmpeg libsm6 libxext6 \
    && rm -rf /var/lib/apt/lists/*

# Copia e instala depend√™ncias do AI Service
COPY ai_service/requirements-ai.txt .
RUN pip install --no-cache-dir -r requirements-ai.txt

# Copia c√≥digo da IA
COPY ai_service/ .

# Define vari√°veis de ambiente padr√£o
ENV PORT=8000
ENV PYTHONUNBUFFERED=1

# Comando de execu√ß√£o com Uvicorn
CMD ["uvicorn", "ai_app:app", "--host", "0.0.0.0", "--port", "8000"]
