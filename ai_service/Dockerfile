# ============================================
# üß† LA FAMIGLIA AI SERVICE (CPU Version)
# ============================================
FROM python:3.10-slim

# Pasta de trabalho
WORKDIR /app

# Instala depend√™ncias do sistema (para torch/diffusers)
RUN apt-get update && apt-get install -y \
    git ffmpeg libsm6 libxext6 \
    && rm -rf /var/lib/apt/lists/*

# Copia e instala depend√™ncias Python espec√≠ficas de IA
COPY requirements-ai.txt /app/
RUN pip install --no-cache-dir -r requirements-ai.txt

# Copia o c√≥digo da IA
COPY . .

# Porta padr√£o (pode ser alterada via docker-compose)
EXPOSE 8000

# Comando padr√£o (pode ser sobrescrito no docker-compose)
CMD ["uvicorn", "ai_app:app", "--host", "0.0.0.0", "--port", "8000"]
