# ============================================
# ğŸ© COSA NOSTRA â€” PUBLICADOR OFICIAL
# Projeto: La Famiglia Links
# Autor: O Capo da CriaÃ§Ã£o (Felipe)
# ============================================

# 1ï¸âƒ£ Garantir que o script pare em caso de erro
$ErrorActionPreference = "Stop"

# 2ï¸âƒ£ Configurar usuÃ¡rio do Git
git config --global user.name "O Capo da CriaÃ§Ã£o"
git config --global user.email "projetoscosanostra@gmail.com"

# 3ï¸âƒ£ Inicializar repositÃ³rio (caso ainda nÃ£o exista)
if (!(Test-Path ".git")) {
    git init
}

# 4ï¸âƒ£ Criar/atualizar README.md com estilo da marca
@"
# ğŸ© La Famiglia Links â€” Cosa Nostra

**O painel central da FamÃ­lia das Ideias.**

ReÃºne os projetos, produtos e conexÃµes que mantÃªm a *FamÃ­lia Cosa Nostra* unida pela:
> **FamÃ­lia, Honra, Respeito e Palavra.**

---

### ğŸ”— Acesse o painel online:
[https://projetoscosanostra.github.io/La_Famiglia_Links/](https://projetoscosanostra.github.io/La_Famiglia_Links/)

---

### ğŸ§± Estrutura
- **/data** â†’ ConfiguraÃ§Ãµes e informaÃ§Ãµes da FamÃ­lia  
- **/assets** â†’ Logos, imagens e Ã­cones oficiais  
- **/docs** â†’ Roteiros e documentos internos  
- **/logs** â†’ Registros de publicaÃ§Ã£o  

---

### â™Ÿï¸ Sobre a Cosa Nostra
> â€œFamÃ­lia, honra, respeito e palavra. No fim, Ã© sÃ³ isso que fica.â€

ğŸ© *Cosa Nostra â€” A FamÃ­lia das Ideias*  
ğŸ§  Criado por **Felipe**, *O Capo da CriaÃ§Ã£o*

---
"@ | Out-File -Encoding utf8 "README.md"

# 5ï¸âƒ£ Adicionar todos os arquivos e criar o commit
$mensagemCommit = "PublicaÃ§Ã£o oficial - $(Get-Date -Format 'dd/MM/yyyy HH:mm')"
git add .
git commit -m "$mensagemCommit"

# 6ï¸âƒ£ Conectar ao repositÃ³rio remoto
git remote remove origin 2>$null
git remote add origin https://github.com/ProjetosCosaNostra/La_Famiglia_Links.git

# 7ï¸âƒ£ Definir o branch principal e enviar
git branch -M main
git push -u origin main

# 8ï¸âƒ£ Publicar no GitHub Pages (caso use GitHub CLI)
gh repo edit --description "O painel central da FamÃ­lia â€” links, projetos e conexÃµes criativas ğŸ©â™Ÿï¸"
gh repo edit --homepage "https://projetoscosanostra.github.io/La_Famiglia_Links/"
gh pages publish main --src .

# 9ï¸âƒ£ Criar registro no log interno
if (!(Test-Path "logs")) { New-Item -ItemType Directory -Path "logs" | Out-Null }
$logPath = "logs/publicacao.txt"
$linhaLog = "[{0}] - {1}" -f (Get-Date -Format "dd/MM/yyyy HH:mm:ss"), $mensagemCommit
Add-Content -Path $logPath -Value $linhaLog

# âœ… Mensagem final
Write-Host "============================================"
Write-Host "ğŸ© PublicaÃ§Ã£o concluÃ­da com sucesso, Capo!"
Write-Host "Site online em: https://projetoscosanostra.github.io/La_Famiglia_Links/"
Write-Host "ğŸ“œ Registro salvo em: logs/publicacao.txt"
Write-Host "============================================"
